# 前端用户界面设计规范

基于系统架构和API接口规范，本文档详细描述了前端用户界面的原型设计，包括界面元素、布局结构和用户交互流程。

## 1. 用户认证页面（登录/注册）

### 1.1 页面概述
用户认证页面是用户访问系统的入口点，包含登录和注册模块，采用标签页切换形式。

### 1.2 界面元素

#### 登录模块
- **Logo/品牌标识**：位于页面顶部中央
- **欢迎标题**：例如"欢迎回来"
- **用户名/邮箱输入框**：
  - 输入类型：文本
  - 占位符：请输入用户名或邮箱
  - 验证：必填字段
- **密码输入框**：
  - 输入类型：密码
  - 占位符：请输入密码
  - 验证：必填字段，最小长度6个字符
- **登录按钮**：
  - 类型：主要按钮
  - 文本：登录
  - 状态：默认启用，提交时显示加载状态
- **记住我复选框**：可选功能
- **忘记密码链接**：导航到密码重置页面
- **注册新账户链接**：切换到注册标签页

#### 注册模块
- **Logo/品牌标识**：位于页面顶部中央
- **欢迎标题**：例如"创建新账户"
- **用户名输入框**：
  - 输入类型：文本
  - 占位符：请输入用户名
  - 验证：必填字段，唯一性验证
- **邮箱输入框**：
  - 输入类型：邮箱
  - 占位符：请输入邮箱地址
  - 验证：必填字段，邮箱格式，唯一性验证
- **密码输入框**：
  - 输入类型：密码
  - 占位符：请输入密码
  - 验证：必填字段，最小长度6个字符
- **确认密码输入框**：
  - 输入类型：密码
  - 占位符：请再次输入密码
  - 验证：必填字段，与密码一致
- **昵称输入框**（可选）：
  - 输入类型：文本
  - 占位符：请输入昵称
- **手机号输入框**（可选）：
  - 输入类型：电话
  - 占位符：请输入手机号
- **注册按钮**：
  - 类型：主要按钮
  - 文本：注册
  - 状态：默认启用，提交时显示加载状态
- **已有账户链接**：切换到登录标签页

### 1.3 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│                      Logo/品牌标识                           │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                  欢迎标题                                │ │
│  ├─────────────────────────────────────────────────────────┤ │
│  │  ┌─┬────────────┬─┐    ┌─┬────────────┬─┐               │ │
│  │  │ │   登录     │ │    │ │   注册     │ │               │ │
│  │  └─┴────────────┴─┘    └─┴────────────┴─┘               │ │
│  ├─────────────────────────────────────────────────────────┤ │
│  │  [用户名/邮箱输入框]                                     │ │
│  │  [密码输入框]                                           │ │
│  │  [记住我][忘记密码]                                     │ │
│  │  [登录按钮]                                             │ │
│  │  [注册新账户链接]                                       │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 1.4 用户交互流程

#### 登录流程
1. 用户输入用户名/邮箱和密码
2. 点击登录按钮
3. 前端验证输入格式
4. 提交到后端API `/api/auth/login`
5. 根据响应结果：
   - 成功：将JWT Token保存到本地存储，导航到主界面
   - 失败：显示错误信息（如用户名或密码不正确）

#### 注册流程
1. 用户填写注册信息
2. 前端验证输入格式
3. 点击注册按钮
4. 提交到后端API `/api/auth/register`
5. 根据响应结果：
   - 成功：显示注册成功信息，自动登录或导航到登录页面
   - 失败：显示错误信息（如用户名已存在）

## 2. 主界面（对话列表和当前对话窗口）

### 2.1 页面概述
主界面是用户日常使用的核心页面，分为左侧对话列表区域和右侧当前对话窗口区域。

### 2.2 界面元素

#### 顶部导航栏
- **Logo/品牌标识**：左侧
- **用户头像/昵称**：右侧下拉菜单
  - 个人资料
  - 用户设置
  - 历史记录
  - 登出
- **新建对话按钮**：主要按钮，位于导航栏中央或右侧

#### 左侧对话列表区域
- **搜索框**：按标题或内容搜索对话
- **对话列表**：
  - 每个对话项包含：
    - 对话标题（默认"新对话"或前几句摘要）
    - 使用的AI模型名称
    - 最后更新时间
    - 删除按钮（悬停时显示）
- **分页控件**：支持大量对话的分页浏览

#### 右侧当前对话窗口区域
- **对话标题栏**：
  - 可编辑的对话标题
  - 显示使用的AI模型
  - 对话设置按钮
- **消息历史区域**：
  - 用户消息（右对齐，不同背景色）
  - AI助手消息（左对齐，不同背景色）
  - 支持多种内容类型显示：
    - 文本内容
    - 图片内容
    - 视频内容（缩略图+播放按钮）
- **输入区域**：
  - 多行文本输入框
  - 附件上传按钮（图片、视频）
  - 发送按钮
  - 快捷操作按钮（如清空输入）

### 2.3 布局结构
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ Logo  [新建对话]                                  [用户头像▼]               │
├────────────────────────────────┬────────────────────────────────────────────┤
│ 对话列表区域                   │ 当前对话窗口区域                           │
│                                │                                            │
│ [搜索框]                       │ [对话标题栏]                               │
│                                │                                            │
│ ┌────────────────────────────┐ │ ┌────────────────────────────────────────┐ │
│ │ 对话1                      │ │ │ 用户消息                               │ │
│ │ 标题: 如何学习AI           │ │ │                                        │ │
│ │ 模型: qwen-vl-max-latest   │ │ └────────────────────────────────────────┘ │
│ │ 时间: 2023-01-01 10:00     │ │ ┌────────────────────────────────────────┐ │
│ └────────────────────────────┘ │ │ AI助手消息                             │ │
│ ┌────────────────────────────┐ │ │                                        │ │
│ │ 对话2                      │ │ └────────────────────────────────────────┘ │
│ │ 标题: 图像识别             │ │                                            │
│ │ 模型: qwen-plus            │ │                                            │
│ │ 时间: 2023-01-01 09:30     │ │                                            │
│ └────────────────────────────┘ │                                            │
│ ...                            │ [输入区域]                                 │
│                                │ [文本框][附件][发送]                       │
└────────────────────────────────┴────────────────────────────────────────────┘
```

### 2.4 用户交互流程

#### 新建对话流程
1. 用户点击"新建对话"按钮
2. 调用后端API `/api/conversations` 创建新对话
3. 成功时，刷新对话列表并选择新创建的对话
4. 清空当前对话窗口内容

#### 发送消息流程
1. 用户在输入框中输入文本或上传附件
2. 点击发送按钮或按回车键
3. 前端验证输入内容
4. 在对话窗口中显示用户消息
5. 调用后端API `/api/conversations/{conversation_id}/messages` 发送消息
6. 显示加载状态
7. 接收AI助手响应并显示
8. 更新对话列表中的最后更新时间

#### 切换对话流程
1. 用户点击左侧对话列表中的任意对话
2. 加载该对话的消息历史（调用 `/api/conversations/{conversation_id}/messages`）
3. 更新右侧对话窗口内容
4. 更新对话标题栏信息

## 3. 对话详情页面

### 3.1 页面概述
对话详情页面显示特定对话的完整信息，包括对话元数据和详细消息历史。

### 3.2 界面元素

#### 顶部面包屑导航
- 首页 > 对话列表 > 对话详情

#### 对话信息区域
- **对话标题**：可编辑
- **AI模型**：显示使用的模型名称
- **创建时间**：对话创建时间
- **最后更新时间**：对话最后更新时间
- **对话状态**：进行中/已结束
- **操作按钮**：
  - 编辑对话信息
  - 导出对话记录
  - 删除对话

#### 消息历史区域
- **消息列表**：按时间顺序显示所有消息
  - 区分显示用户消息和AI助手消息
  - 支持多种内容类型（文本、图片、视频）
  - 显示消息发送时间
  - 消息操作菜单（复制、删除等）

#### 底部操作区域
- **继续对话按钮**：导航到主界面并加载此对话
- **返回列表按钮**：返回到对话列表页面

### 3.3 布局结构
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 首页 > 对话列表 > 对话详情                                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│ 对话信息区域                                                                │
│                                                                             │
│ 标题: 如何学习AI                            [编辑][导出][删除]             │
│ 模型: qwen-vl-max-latest                                                    │
│ 创建时间: 2023-01-01 10:00                                                  │
│ 最后更新: 2023-01-01 10:15                                                  │
│ 状态: 进行中                                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│ 消息历史区域                                                                │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ [用户头像] 用户消息                                                     │ │
│ │ 时间: 2023-01-01 10:00                                                  │ │
│ │ 内容: 我想学习人工智能，有什么建议吗？                                  │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ AI助手消息 [头像]                                                       │ │
│ │ 时间: 2023-01-01 10:01                                                  │ │
│ │ 内容: 学习人工智能可以从几个方面开始...                                 │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ...                                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│ [继续对话][返回列表]                                                        │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.4 用户交互流程

#### 编辑对话信息流程
1. 用户点击"编辑"按钮
2. 弹出编辑对话框，显示当前对话信息
3. 用户修改对话标题和其他信息
4. 提交到后端API `/api/conversations/{conversation_id}` 更新对话
5. 成功时更新页面显示

#### 删除对话流程
1. 用户点击"删除"按钮
2. 弹出确认对话框
3. 用户确认删除
4. 调用后端API `/api/conversations/{conversation_id}` 删除对话
5. 成功时导航到对话列表页面

## 4. 历史记录页面

### 4.1 页面概述
历史记录页面显示用户的API调用历史和对话统计信息，帮助用户了解使用模式。

### 4.2 界面元素

#### 顶部导航栏
- 页面标题：历史记录
- 时间筛选器：按日期范围筛选
- 模型筛选器：按AI模型筛选

#### 统计信息区域
- **总对话数**：用户创建的对话总数
- **总消息数**：发送和接收的消息总数
- **总令牌数**：消耗的令牌总数
- **模型使用统计**：模型使用情况的图表显示

#### API调用历史区域
- **表格视图**：
  - 调用时间
  - 使用的模型
  - API端点
  - 状态码
  - 消耗的令牌数
  - 调用持续时间
- **分页控件**：支持大量记录的分页浏览
- **导出按钮**：将历史记录导出为CSV文件

#### 图表显示区域
- **每日使用统计图表**：显示每日对话、消息和令牌使用量的折线图
- **模型使用分布图表**：显示模型使用比例的饼图

### 4.3 布局结构
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 历史记录                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│ [时间筛选器][模型筛选器][导出按钮]                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│ 统计信息区域                                                                │
│                                                                             │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐             │
│ │ 总对话数    │ │ 总消息数    │ │ 总令牌数    │ │ 模型统计    │             │
│ │     15      │ │     128     │ │    2560     │ │             │             │
│ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘             │
├─────────────────────────────────────────────────────────────────────────────┤
│ 图表显示区域                                                                │
│                                                                             │
│ [每日使用统计图表]        [模型使用分布图表]                                │
├─────────────────────────────────────────────────────────────────────────────┤
│ API调用历史区域                                                             │
│                                                                             │
│ 时间              模型              端点              状态  令牌数  持续时间  │
│ 2023-01-01 10:00  qwen-vl-max...   /api/bailian...   200     21      1200ms  │
│ 2023-01-01 09:30  qwen-plus        /api/bailian...   200     15      800ms   │
│ ...                                                                         │
│                                                                             │
│ [分页控件]                                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.4 用户交互流程

#### 筛选流程
1. 用户选择时间范围或模型筛选条件
2. 自动刷新API调用历史和统计数据
3. 调用后端API `/api/history/api-calls` 和 `/api/history/conversations/statistics` 获取数据
4. 更新页面显示

#### 导出流程
1. 用户点击导出按钮
2. 根据当前筛选条件生成CSV文件
3. 下载文件到本地

## 5. 用户设置页面

### 5.1 页面概述
用户设置页面允许用户管理个人信息、账户安全和系统偏好设置。

### 5.2 界面元素

#### 侧边导航菜单
- 个人信息
- 账户安全
- 通知设置
- 隐私设置

#### 个人信息设置
- **头像上传**：上传和裁剪用户头像
- **用户名**：只读显示
- **邮箱地址**：只读显示（需要特定流程修改）
- **昵称**：可编辑文本框
- **手机号**：可编辑文本框
- **保存按钮**：保存修改的个人信息

#### 账户安全设置
- **修改密码**：
  - 当前密码输入框
  - 新密码输入框
  - 确认新密码输入框
  - 修改密码按钮
- **登录历史**：显示最近登录记录
  - 登录时间
  - 登录IP地址
  - 登录设备信息

#### 通知设置
- **邮件通知**：切换选项
  - 系统公告通知
  - 对话更新通知
  - API使用提醒
- **应用内通知**：切换选项
  - 系统消息
  - 重要更新

#### 隐私设置
- **数据导出**：导出用户数据
- **数据删除**：删除账户（危险操作，需要确认）

### 5.3 布局结构
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 用户设置                                                                    │
├────────────────────────────────┬────────────────────────────────────────────┤
│ 侧边导航菜单                   │ 设置内容区域                               │
│                                │                                            │
│ • 个人信息                     │ ┌────────────────────────────────────────┐ │
│ • 账户安全                     │ │ [头像上传]                             │ │
│ • 通知设置                     │ │                                        │ │
│ • 隐私设置                     │ │ 用户名: example_user (只读)            │ │
│                                │ │ 邮箱: user@example.com (只读)          │ │
│                                │ │ 昵称: [输入框]                         │ │
│                                │ │ 手机号: [输入框]                       │ │
│                                │ │                                        │ │
│                                │ │ [保存]                                 │ │
│                                │ └────────────────────────────────────────┘ │
└────────────────────────────────┴────────────────────────────────────────────┘
```

### 5.4 用户交互流程

#### 修改个人信息流程
1. 用户修改昵称或手机号
2. 点击保存按钮
3. 前端验证输入格式
4. 提交到后端API `/api/auth/user` 更新用户信息
5. 成功时显示成功信息

#### 修改密码流程
1. 用户输入当前密码、新密码和确认新密码
2. 前端验证密码强度和一致性
3. 点击修改密码按钮
4. 提交到后端API（需要特定API端点）
5. 成功时显示成功信息，可能需要重新登录

## 总结

本UI设计规范基于系统的API接口规范和数据库设计，涵盖了核心页面包括用户认证、主界面、对话详情、历史记录和用户设置。设计注重用户体验，提供清晰的界面元素、合理的布局结构和流畅的交互流程，以满足用户与AI模型交互的核心需求。